# Проект автоматизации тестирования для Way2Automation

## Технический стек
*   **Язык:** Java 17
*   **Сборка:** Maven
*   **Автоматизация браузера:** Selenium WebDriver
*   **Распределенный запуск:** Selenium GRID
*   **Фреймворк тестирования:** TestNG
*   **Построение отчетов:** Allure Framework

---

### **Задача U1. Создание проекта с автотестами с нуля**
**Цель:** Создать базовую структуру проекта Maven для UI-автотестов.\
**Критерии выполнения:**
* Инициализирован Maven-проект с корректными зависимостями (`pom.xml`) для Java 17, Selenium, TestNG.
* Реализована структура проекта по паттерну **Page Object Model (POM)** (отдельные классы для каждой страницы/виджета).
* Реализован паттерн **Factory** для создания экземпляров Page Object.
* Написаны базовые тест-кейсы в файле `Test-case.md`, демонстрирующий работу формой отправки данных

---

### **Задача U2. Интеграция Allure и добавление аннотаций**
**Цель:** Настроить детализированную отчетность и логирование шагов.\
**Критерии выполнения:**
1.  **Настройка отчетов:**
  * В `pom.xml` добавлены зависимости и настройки для Allure TestNG.
  * Отчет генерируется после прогона тестов (`mvn clean test allure:serve`).
2.  **Аннотирование тестов:**
Каждый тестовый метод помечен аннотацией `@Severity(SeverityLevel.*)`.
3.  **Логирование шагов:**
Каждый публичный метод в классах Page Object помечен аннотацией `@Step`.
4.  **Структурирование отчетов:**
Добавлены аннотации `@Epic`, `@Feature`, `@Story` для тестовых классов и методов.

---

### **Задача U3. Параметризация тестов с помощью DataProvider**
**Цель:** Реализовать запуск тестов с различными наборами данных.\
**Критерии выполнения:**
1.  **Новый suite:**
Создан отдельный класс `FormDataProvider`.

2.  **Универсальный тест:**
  * Разработан тест для проверки формы авторизации (логин/пароль).
  * В качестве источника данных используется `@DataProvider` TestNG, передающий как валидные, так и невалидные данные.

---

### **Задача U4. Интеграция скриншотов в Allure отчет**
**Цель:** Настроить автоматическое снятие скриншотов при падении тестов.\
**Критерии выполнения:**
1.  **Настройка скриншотов:**
  * Реализован `AshotScreenshot`, который делает скриншота с помощью библиотеки **aShot** и его прикрепление к Allure отчету (`@Attachment`).
  * Метод `tearDown(ITestResult result)` класса `BaseTest` реализует `ITestListener`, перехватывающий падения тестов и запуск метода от **aShot**.
2.  **Демонстрация:**
  * Специально добавлены тесты в классах `DataProvider`, которые гарантированно падают, для демонстрации работы фичи в отчете.

---

### **Задача U5. Работа с Cookies**
**Цель:** Реализовать механизм сохранения и загрузки сессии через cookies.\
**Критерии выполнения:**
1.  **Функции для работы с файлами:**
Написаны функции в классе `CookiesPage` для записи и чтения куков.

2.  **Тест с использованием куков:**
  * Написан тест, который при первом запуске проходит авторизацию и сохраняет куки в файл.
  * При втором запуске тест загружает куки из файла, добавляет их в браузер и проверяет, что пользователь авторизован, без повторного ввода логина и пароля.

---

### **Задача U6. Работа с JavaScriptExecutor**
**Цель:** Освоить выполнение JavaScript кода в браузере из автотестов.\
**Критерии выполнения:**
1.  **Реализация методов:**
  * С помощью `JavaScriptExecutor` реализованы функции:
    * убирается фокус из поля ввода
    * определяется наличие скролла на странице
  * Каждая функция помечена аннотацией `@Step`.

2.  **Тестовый сценарий:**
Написан тест-кейс, который использует описанный функционал на одной из страниц сайта.

---

### **Задача U7. Параллельный запуск тестов и настройка Selenium GRID**
**Цель:** Организовать параллельный запуск тестов в нескольких браузерах.\
**Критерии выполнения:**
1.  **Конфигурация TestNG:**\
Создан `testngCrossBrowsers.xml`, где настроен параллельный запуск (`parallel="tests"`, `thread-count="3"`).

2.  **Развертывание Selenium GRID:**
  * Написаны bash-скрипт (`selenium_GRID_start.bat`) для запуска Selenium GRID Hub и Node.
  * Скрипт позволяет прогнать автотесты в нужном количестве потоков.

---

### **Задача U8. Перезапуск упавших тестов**
**Цель:** Повысить стабильность прогона за счет автоматического перезапуска упавших тестов.\
**Критерии выполнения:**
1.  **Автоперезапуск:**\
Реализован механизм перезапуска с помощью `RetryAnalyzer`. Упавшие тесты перезапускаются указанное количество раз. В антотациях к тестам добавлена анотация для перезапуска.
2.  **Запуск только упавших тестов:**\
Написан скрипт `failed_tests_start.bat` (напр., на основе парсинга `testng-failed.xml`), который позволяет запустить только тесты, упавшие при предыдущем прогоне.
---

### **Задача U9. Кросс-браузерное тестирование и DriverFactory**
**Цель:** Настроить запуск тестов в разных браузерах локально и через GRID.\
**Критерии выполнения:**
1.  **Локальный запуск:**\
Настроен запуск тестов в Chrome, Firefox, Edge, IE через capabilities WebDriver.
2.  **Запуск через GRID:**\
Настроен запуск тестов на удаленном узле Selenium GRID.
3.  **Фабрика драйверов:**\
Реализован класс `DriverFactory`, который возвращает экземпляр `WebDriver` в зависимости от параметров (название браузера, режим - локальный/грид, URL грида).

---

### **Задача U10. Тестирование Drag and Drop внутри IFrame**
**Цель:** Реализовать тест для проверки функциональности перетаскивания.\
**Критерии выполнения:**
* Тест открывает страницу с droppable элементом.
* Осуществляется переход и работа внутри `iframe`.
* Реализовано перетаскивание (Drag'n'Drop) элемента.
* Выполнена проверка, что текст целевого элемента изменился на "Dropped!".

---

### **Задача U11. Тестирование работы с вкладками (Tabs)**
**Цель:** Реализовать тест для проверки управления несколькими вкладками браузера.\
**Критерии выполнения:**
* Тест открывает страницу, нажимает на ссылку, открывающую новую вкладку.
* Фокус драйвера переключается на новую вкладку.
* На новой вкладке находится и нажимается другая ссылка.
* Выполнена проверка, что открылась третья вкладка.

---

### **Задача U12. Тестирование Alerts**
**Цель:** Реализовать тест для проверки работы с модальными окнами (Alert).\
**Критерии выполнения:**
* Тест открывает страницу с Alert'ами.
* Нажимается кнопка "Input Alert".
* Нажимается кнопка, вызывающая alert.
* Вводится кастомный текст в prompt и подтверждается.
* Выполнена проверка, что введенный текст отображается на странице.

---

### **Задача U13. Тестирование Basic Authentication**
**Цель:** Реализовать тест для проверки доступа к ресурсу, защищенному базовой HTTP-аутентификацией.\
**Критерии выполнения:**
* Нажимается кнопка "Display Image".
* Тест открывает URL, открывает окно браузера с вводом данных в ручном типе
* Выполнена проверка, что изображение отображается (авторизация прошла успешно).

---

### **Задача U14. Комплексное тестирование Banking-приложения**
**Цель:** Реализовать end-to-end сценарий работы с банковским приложением.
**Критерии выполнения:**\
**5.1. Регистрация через Sample Form:**
* Заполнение формы корректными данными.
* Выбор Hobbies - Sports.
* Вычисление самого длинного слова из списка хобби и ввод текста в поле.
* Проверка сообщения об успешной регистрации.

**5.2. Интерфейс Bank Manager:**\
* **5.2.1 Добавление покупателя:** Заполнение и отправка формы. Проверка alert'а.
* **5.2.2 Открытие аккаунта:** Выбор созданного покупателя и валюты. Проверка alert'а.

**5.3. Интерфейс Customer Login:**\
**Логин:** Вход под созданным пользователем. Проверка приветствия.
* **5.3.1 Успешное пополнение:** Ввод суммы `100321`. Проверка сообщения и истории транзакций.
* **5.3.2 Неуспешное пополнение:** Ввод `0`. Проверка отсутствия сообщения и операции.
* **5.3.3 Успешное снятие:** Снятие случайной суммы. Проверка сообщения и истории.
* **5.3.4 Неуспешное снятие:** Попытка снять `1000000`. Проверка сообщения об ошибке и отсутствия операции.
* **5.3.5 Проверка баланса:** Сравнение рассчитанного баланса по истории с отображаемым.
* **5.3.6 Снятие до нуля:** Обнуление счета. Проверка баланса.
* **5.3.7 Очистка истории:** Сброс транзакций. Проверка очистки и нулевого баланса.

**5.4. Удаление покупателя:**
* Поиск клиента по имени в разделе "Customers".
* Удаление клиента. Проверка, что он удалился из таблицы.